<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>韩雪冬网站效果 - 妙味课堂 - www.miaov.com</title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>

<div id="automatic">

	<div class="prev_div"></div>
    <a class="prev" href="###">
        <span class="ico1"></span>
        <span class="ico"></span>
        <span class="txt"></span>
    </a>
	
	<div class="next_div"></div>
    <a class="next" href="###">
        <span class="ico1"></span>
        <span class="ico"></span>
        <span class="txt"></span>
    </a>

	<div class="line"></div>

    <ul>
        <li class="pos_0"><a href="http://www.miaov.com"><img src="images/8.jpg" width="100" alt="妙味课堂 www.miaov.com" longdesc="http://www.miaov.com" /></a></li>
        <li class="pos_1"><a href="http://www.miaov.com"><img src="images/1.jpg" width="270" alt="妙味课堂 www.miaov.com" longdesc="http://www.miaov.com" /></a></li>
        <li class="pos_2"><a href="http://www.miaov.com"><img src="images/2.jpg" width="510" alt="妙味课堂 www.miaov.com" longdesc="http://www.miaov.com" /></a></li>
        <li class="pos_3"><a href="http://www.miaov.com"><img src="images/3.jpg" width="680" alt="妙味课堂 www.miaov.com" longdesc="http://www.miaov.com" /></a></li>
        <li class="pos_4"><a href="http://www.miaov.com"><img src="images/4.jpg" width="510" alt="妙味课堂 www.miaov.com" longdesc="http://www.miaov.com" /></a></li>
        <li class="pos_5"><a href="http://www.miaov.com"><img src="images/5.jpg" width="270" alt="妙味课堂 www.miaov.com" longdesc="http://www.miaov.com" /></a></li>
        <li class="pos_6"><a href="http://www.miaov.com"><img src="images/6.jpg" width="270" alt="妙味课堂 www.miaov.com" longdesc="http://www.miaov.com" /></a></li>
        <li class="pos_6"><a href="http://www.miaov.com"><img src="images/7.jpg" width="270" alt="妙味课堂 www.miaov.com" longdesc="http://www.miaov.com" /></a></li>
    </ul>

</div>
<p id="footer"><a href="http://www.miaov.com">妙味课堂 - www.miaov.com</a></p>
<script src="../../miaov.js"></script>
<script>
(function(){
    let prev_div = document.querySelector(".prev_div");
    let next_div = document.querySelector(".next_div");
    let list = document.querySelectorAll("ul li");
    let line = document.querySelector(".line");
    let liStyle = [];
    /*
        li: left top opacity  z-index
            img: width height
            {
                li:{

                },
                img: {

                }
            }
    */
    list.forEach((item)=>{
        let img = item.querySelector("img");
        let style = {
            li:{
                left: css(item,"left"),
                top: css(item,"top"),
                opacity: css(item,"opacity"),
                zIndex: css(item,"zIndex") 
            },
            img:{
                width: css(img,"width"),
                height: css(img,"height")
            }
        };
        liStyle.push(style);
    });
    prev_div.onclick = function(){
        liStyle.push(liStyle.shift());
        move();
    }
    next_div.onclick = function(){
        liStyle.unshift(liStyle.pop());
        move();
    }
    function move(){
        mTween({
            el: line,
            attr: {
                opacity:0
            }
        });
        list.forEach((item,index)=>{
            let img = item.querySelector("img");
            //console.log(liStyle[index].li);
            mTween({
                el: item,
                attr:liStyle[index].li
            });
            mTween({
                el: img,
                attr:liStyle[index].img,
                cb: function(){
                    mTween({
                        el: line,
                        attr: {
                            opacity:1
                        }
                    });
                }
            });
        });
    }
})();
</script>
</body>
</html>
